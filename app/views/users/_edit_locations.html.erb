<ul class="locations-list">
  <% user.locations.each do |location| %>
    <%= render "user_locations/ul", user: user, location: location %>
  <% end %>
</ul>

<form
  action="<%= user_user_locations_url(user) %>"
  method="post"
  id="new-loc"
  data-remote="true">

  <input
     name="authenticity_token"
     type="hidden"
     value="<%= form_authenticity_token %>">

  <input
     id="location_city"
     name="location[city]"
     placeholder="New Location: City"
     type="text">
  <input
     id="location_country"
     name="location[country]"
     placeholder="New Location: Country"
     type="text">
  <input type="submit" value="Create">
</form>

<script>

$(document).ready(function(){

  $(".locations-list").on("ajax:success", "#location-delete", function(event, data){
    $($(event.target).parent()[0]).remove()
  });


  $("#new-loc").on("ajax:success", function(event, data){
    var $form = $(this);
    $(".locations-list").append(data);
    $form[0].reset();
  });

});

</script>

<style>
#new-loc input[type="text"] {
  display: inline;
  padding: 2px;
  width: 150px;
  margin: 0;
  border: 2px solid #FF6600;
  border-radius: 2px;
  background-color: #5B605F;
  font-size: 14px;
  color: #E3E3E3;
}

#new-loc input[type="submit"] {
  display: inline;
  font-size: 14px;
  padding: 2px;
  margin: 10px auto;
  background: #5B605F;
  color: #FF6600;
  border: 2px solid #FF6600;
  border-radius: 2px;
}

#new-loc input[type="submit"]:hover {
  background-color: #FF6600;
  border: 2px solid #E3E3E3;
  color: #E3E3E3;
}

</style>